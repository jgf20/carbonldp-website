<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
	    http://www.springframework.org/schema/aop/spring-aop.xsd
">

	
	<!-- 
	<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
	    <property name="scopes">
	        <map>
	            <entry key="thread">
	                <bean class="org.springframework.context.support.SimpleThreadScope"/>
	            </entry>
	        </map>
	    </property>
	</bean>
	
	 -->

	<!--
	*********************************************************************************************************
	SERVICE BEANS
	*********************************************************************************************************
	-->
	
	<bean name="configurationService" class="com.base22.carbon.services.ConfigurationService" init-method="init"></bean>
	
	<!-- bean name="repositoryService" class="com.base22.carbon.services.RepositoryServiceFactory" factory-method="create" scope="thread" -->
	 <bean name="repositoryService" class="com.base22.carbon.services.RepositoryServiceFactory" factory-method="create" scope="request">
		<!-- Change this value to toggle between the repository configuration -->
		<constructor-arg value="TDB"></constructor-arg>
		<constructor-arg>
			<map>
				<entry key="DB2">
					<bean class="com.base22.carbon.services.DB2RepositoryService">
						<property name="dbUrl" value="jdbc:db2://localhost:50000/CARBON" />
						<property name="dbUsername" value="db2admin" />
						<property name="dbPassword" value="db2admin" />
						<property name="schema" value="DB2ADMIN" />
					</bean>
				</entry>
				<entry key="TDB">
					<bean class="com.base22.carbon.services.TDBRepositoryService">
						<property name="datasetDirectory" value="C:\\carbon\\TDB\\" />
					</bean>
				</entry>
				<entry key="ORACLE-SDB">
					<bean class="com.base22.carbon.services.OracleSDBRepositoryService">
						<property name="jdbcBaseURL" value="jdbc:oracle:thin:@localhost:1521:" />
						<property name="oracleUser" value="SYSTEM" />
						<property name="oraclePassword" value="oracleadmin" />
					</bean>
				</entry>
			</map>
		</constructor-arg>
		<aop:scoped-proxy/>
	</bean>
	
	<!-- bean name ="sparqlService" class="com.base22.carbon.services.SparqlService" init-method="init" scope="thread" -->
	<!-- bean name ="rdfService" class="com.base22.carbon.services.RdfService" init-method="init" scope="thread" -->
	<!-- bean name ="ldpService" class="com.base22.carbon.services.LDPService" init-method="init" scope="thread" -->
	
	<bean name="sparqlService" class="com.base22.carbon.services.SparqlService" init-method="init" scope="request">
		<property name="repositoryService" ref="repositoryService" />
		<aop:scoped-proxy/>
	</bean>
	
	<bean name="rdfService" class="com.base22.carbon.services.RdfService" init-method="init" scope="request">
		<property name="repositoryService" ref="repositoryService" />
		<property name="sparqlService" ref="sparqlService" />
		<aop:scoped-proxy/>
	</bean>
	
	<bean name="ldpService" class="com.base22.carbon.services.LDPService" init-method="init" scope="request">
		<property name="sparqlService" ref="sparqlService" />
		<property name="rdfService" ref="rdfService" />
		<aop:scoped-proxy/>
	</bean>
</beans>
